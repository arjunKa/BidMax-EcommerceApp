<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Details</title>
    <style>
        body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        height: 100vh;
    }

    header {
        background-color: rgb(255, 255, 255);
        color: rgb(0, 0, 0);
        text-align: center;
        font-size: 20px;
        font-family: 'Jockey One', sans-serif;
    }

    .back-button {
        background-color: #000000;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        position: absolute;
        top: 7%;
        left: 3%;
    }


    .flex-container {
        display: flex;
        flex: 1;
    }

    .item-details {
        flex: 1;
        padding: 20px;
        border: 1px solid #ccc;
        background-color: #2B67F6;
        color: white;
        display: flex;
        flex-direction: column;
        align-items: left; /* Center align form elements horizontally */
        justify-content: center; /* Center align form elements vertically */
        padding-left: 100px; /* Add margin to the left to shift the form to the right */
        font-family: 'Epilogue'; /* Use the correct font-family */
    }

    .item-details h1{
        font-size: 60px;
    }

   


        #payNowButton {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>

<script>
        // Fetch the username from the server using AJAX
        function fetchUsername() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    // Update the username display element
                    document.getElementById("usernameDisplay").innerText = "User Id:, " + xhr.responseText;
                }
            };
            xhr.open("GET", "GetUsernameServlet", true);
            xhr.send();
        }
        
         window.onload = function () {
            fetchUsername();
        };
        
    </script>

<body>
	
	 <header>
        <h1>BEZOS</h1>
        <!-- Add an element to display the username -->
        <p id="usernameDisplay"></p>
    </header>
    
     <div class="flex-container">
        <h1>Item Details</h1>

		    <div class="item-details">
		        <p><strong>Item Name:</strong> <span id="itemName"></span></p>
		        <p><strong>Current Price:</strong> <span id="currentPrice"></span></p>
		        <p><strong>Auction Type:</strong> <span id="auctionType"></span></p>
		        <p><strong>Remaining Time:</strong> <span id="remainingTime"></span></p>
		        <p><strong>Description:</strong> <span id="description"></span></p>
		        <p><strong>Shipping Price:</strong> <span id="shippingPrice"></span></p>
		        <button id="payNowButton" onclick="handlePayment()">Pay Now</button>
		        
		    </div>
        
    </div>
    
    

    <script>
        // Function to get query parameters from the URL
        function getQueryParam(param) {
            var urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Set item details from query parameters
        document.getElementById("itemName").innerText = getQueryParam("itemName");
        document.getElementById("currentPrice").innerText = getQueryParam("currentPrice");
        document.getElementById("auctionType").innerText = getQueryParam("auctionType");
        document.getElementById("remainingTime").innerText = getQueryParam("remainingTime");

        // Fetch additional details from the server
        fetchDetails(getQueryParam("itemName"));

        function fetchDetails(itemName) {
            // Perform an AJAX request to the server to get additional details
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    // Update the HTML content with the received details
                    var details = JSON.parse(this.responseText);
                    document.getElementById("description").innerText = details.description;
                    document.getElementById("shippingPrice").innerText = details.shippingPrice;
                }
            };
            xhttp.open("GET", "getDetails?itemName=" + itemName, true);
            xhttp.send();
        }

        function handlePayment() {
            // Implement your payment logic here
            alert("Payment logic goes here!");
        }
    </script>
</body>

</html>